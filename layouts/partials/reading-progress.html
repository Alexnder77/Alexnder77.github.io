{{ $hasHeaders := gt (len (findRE "<h\\d.*?>(.|\n)*?</h\\d>" .Content)) 0 }}
{{ if (or (and (not $.Site.Data.config.enableToc) .Params.enableToc) (and $.Site.Data.config.enableToc (ne .Params.enableToc false) $hasHeaders)) }}
<aside class="mainTOC" style="float:right;">
<details {{ if $.Site.Data.config.openToc }}open {{ end }}>
<summary>{{ i18n "toc" }}</summary>
{{ .TableOfContents }}
</details>
</aside>
<script>
function highlightCurrentHeader() {
var currentHeader = document.querySelector('.mainTOC ul li.active a');
if (currentHeader) {
currentHeader.parentElement.classList.add('active');
}
}

  window.addEventListener('scroll', highlightCurrentHeader);
</script>
{{end}}
